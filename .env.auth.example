# XMRT Auth Configuration - Fixed
# DO NOT use deprecated JWT config options

# ❌ DEPRECATED - DO NOT USE:
# GOTRUE_JWT_ADMIN_GROUP_NAME
# GOTRUE_JWT_DEFAULT_GROUP_NAME

# ✅ USE THESE INSTEAD:
GOTRUE_JWT_SECRET=${SUPABASE_JWT_SECRET}
GOTRUE_JWT_EXP=3600
GOTRUE_JWT_AUD=authenticated

# Database Connection Pool (prevents connection exhaustion)
GOTRUE_DB_MAX_POOL_SIZE=10
GOTRUE_DB_MAX_IDLE_CONNS=5
GOTRUE_DB_CONN_MAX_LIFETIME=3600
GOTRUE_DB_CONN_MAX_IDLE_TIME=300

# Health Check Configuration
GOTRUE_API_HEALTH_CHECK_ENABLED=true
GOTRUE_API_REQUEST_ID_HEADER=X-Request-ID

# Rate Limiting (prevent abuse)
GOTRUE_RATE_LIMIT_HEADER=X-Rate-Limit
GOTRUE_RATE_LIMIT_EMAIL_SENT=60
GOTRUE_RATE_LIMIT_TOKEN_REFRESH=150

# Logging
GOTRUE_LOG_LEVEL=info
GOTRUE_LOG_FILE=/var/log/gotrue.log

# Graceful Shutdown
GOTRUE_GRACEFUL_SHUTDOWN_TIMEOUT=30

# Additional Supabase Settings
SUPABASE_AUTH_EXTERNAL_GOOGLE_ENABLED=true
SUPABASE_AUTH_AUTOCONFIRM=false
SUPABASE_AUTH_ENABLE_SIGNUP=true
